import{u as F,a as B,r as d,j as e,R as W,b as D,c as H,d as V,L as j,e as G,A as O}from"./index-B7WG_kHJ-1769026461592.js";import{u as _}from"./useTranslation-CnXjuBvM-1769026461592.js";import{m as r}from"./motion-DSM7Rpg2-1769026461592.js";import{A as q}from"./index-yirOBEcN-1769026461592.js";const t={accent:"#6ad4a0",accentLight:"#a0e8c4",border:"rgba(106, 212, 160, 0.15)",borderGlow:"rgba(106, 212, 160, 0.4)",textMuted:"rgba(255, 255, 255, 0.5)",textPrimary:"#ffffff",bgCard:"rgba(20, 18, 15, 0.7)",error:"#ef4444",warning:"#f59e0b"},J=o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),M=o=>o.trim().replace(/[<>]/g,""),U=({count:o=15})=>{const m=d.useMemo(()=>Array.from({length:o},(s,p)=>({id:p,size:2+Math.random()*3,left:Math.random()*100,delay:Math.random()*5,duration:10+Math.random()*10,opacity:.15+Math.random()*.25})),[o]);return e.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",style:{zIndex:1},children:m.map(s=>e.jsx(r.div,{className:"absolute rounded-full",style:{width:s.size,height:s.size,left:`${s.left}%`,bottom:"-10px",background:t.accent,boxShadow:`0 0 ${s.size}px ${t.accent}`,opacity:s.opacity},animate:{y:[0,-window.innerHeight-50],opacity:[0,s.opacity,s.opacity,0]},transition:{duration:s.duration,delay:s.delay,repeat:1/0,ease:"linear"}},s.id))})},C=({type:o,label:m,value:s,onChange:p,placeholder:h,disabled:v,icon:g,autoComplete:w,delay:c,isMobile:l})=>{const[x,y]=d.useState(!1);return e.jsxs(r.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.4,delay:c},children:[e.jsx("label",{style:{display:"block",fontSize:l?"11px":"13px",fontWeight:500,color:t.textMuted,marginBottom:l?"4px":"6px"},children:m}),e.jsxs(r.div,{className:"relative",animate:{scale:x?1.01:1},transition:{duration:.2},children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:x?t.accent:t.textMuted,display:"flex",alignItems:"center"},children:g}),e.jsx("input",{type:o,value:s,onChange:p,onFocus:()=>y(!0),onBlur:()=>y(!1),placeholder:h,disabled:v,autoComplete:w,style:{width:"100%",height:l?"42px":"48px",paddingLeft:l?"38px":"44px",paddingRight:"12px",fontSize:l?"14px":"15px",color:t.textPrimary,background:"rgba(255, 255, 255, 0.05)",border:`1px solid ${x?t.borderGlow:t.border}`,borderRadius:l?"12px":"14px",outline:"none",transition:"all 0.2s ease",boxShadow:x?`0 0 15px ${t.accent}25`:"none"}})]})]})},Z=()=>{const{t:o}=_(),m=F(),{login:s,isLoading:p}=B(),[h,v]=d.useState(""),[g,w]=d.useState(""),[c,l]=d.useState(""),[x,y]=d.useState([]),[u,z]=d.useState(0),[k,I]=d.useState(!1),[i,T]=d.useState(!1),[a,N]=d.useState(!1);d.useEffect(()=>{const n=()=>{T(window.innerWidth<640),N(window.innerWidth<380||window.innerHeight<600)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),d.useEffect(()=>{const n=setTimeout(()=>I(!0),1200);return()=>clearTimeout(n)},[]);const E=()=>{const n=[];return h?J(h)||n.push("Email non valida"):n.push("Email richiesta"),g?g.length<6&&n.push("Password troppo corta (min 6 caratteri)"):n.push("Password richiesta"),y(n),n.length===0},A=async n=>{var b,$,L,R;if(n.preventDefault(),l(""),y([]),!!E()){if(u>=5){l("Troppi tentativi. Riprova tra qualche minuto.");return}try{const f=M(h).toLowerCase(),S=M(g);await s(f,S),z(0),m("/dashboard")}catch(f){z(S=>S+1),((b=f.response)==null?void 0:b.status)===429?l("Troppi tentativi. Riprova tra 15 minuti."):(($=f.response)==null?void 0:$.status)===401?l("Credenziali non valide."):(R=(L=f.response)==null?void 0:L.data)!=null&&R.details?y(f.response.data.details):l("Errore di connessione.")}}},P=a?5:i?8:20;return e.jsxs("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",padding:i?"12px":"16px",overflow:"hidden",fontFamily:'"Plus Jakarta Sans", -apple-system, BlinkMacSystemFont, sans-serif'},children:[e.jsx(r.div,{className:"fixed inset-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},style:{background:`
            radial-gradient(ellipse 80% 50% at 50% -10%, rgba(106, 212, 160, 0.1) 0%, transparent 60%),
            radial-gradient(ellipse 60% 40% at 80% 100%, rgba(74, 168, 112, 0.06) 0%, transparent 50%),
            linear-gradient(to bottom, #12110f 0%, #0a0a09 100%)
          `,backgroundSize:"200% 200%",animation:"gradientMove 20s ease infinite"}}),e.jsx("style",{children:`
        @keyframes gradientMove {
          0%, 100% { background-position: 0% 0%; }
          50% { background-position: 100% 100%; }
        }
      `}),e.jsx(U,{count:P}),e.jsx("div",{className:"fixed top-0 left-0 right-0 pointer-events-none",style:{height:i?"150px":"250px",background:"radial-gradient(ellipse 100% 100% at 50% -30%, rgba(106, 212, 160, 0.12) 0%, transparent 70%)",zIndex:1}}),e.jsx(r.div,{className:"w-full relative",style:{maxWidth:i?"100%":"400px",zIndex:10},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2,ease:[.25,.46,.45,.94]},children:e.jsxs("div",{style:{background:t.bgCard,backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:i?"20px":"28px",border:`1px solid ${t.border}`,boxShadow:"0 4px 24px rgba(0, 0, 0, 0.4), 0 0 60px rgba(106, 212, 160, 0.04)",padding:a?"16px":i?"20px":"32px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:"15%",right:"15%",height:"1px",background:`linear-gradient(90deg, transparent, ${t.accent}50, transparent)`}}),e.jsxs("div",{className:"text-center",style:{marginBottom:a?"16px":i?"20px":"28px"},children:[e.jsx(r.div,{className:"flex justify-center",style:{marginBottom:a?"10px":i?"12px":"16px"},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.4,type:"spring",stiffness:200},children:e.jsx(r.div,{style:{padding:a?"12px":i?"14px":"18px",borderRadius:i?"18px":"24px",background:`linear-gradient(145deg, ${t.accent}35, ${t.accent}15)`,border:`1px solid ${t.accent}25`},animate:{boxShadow:[`0 0 15px ${t.accent}30`,`0 0 25px ${t.accent}45`,`0 0 15px ${t.accent}30`]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(W,{size:a?28:i?32:38,style:{color:t.accentLight,filter:`drop-shadow(0 0 8px ${t.accent})`}})})}),e.jsx(r.h1,{style:{fontSize:a?"22px":i?"26px":"32px",fontWeight:700,marginBottom:"4px",background:`linear-gradient(135deg, ${t.accentLight}, ${t.accent})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4,delay:.55},children:o("app.name")}),e.jsx(r.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.7},style:{color:t.textMuted,fontSize:a?"12px":i?"13px":"14px"},children:o("auth.loginTitle")})]}),e.jsx("form",{onSubmit:A,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:a?"12px":i?"14px":"18px"},children:[e.jsx(C,{type:"email",label:o("auth.email"),value:h,onChange:n=>v(n.target.value),placeholder:"esempio@email.com",disabled:p,icon:e.jsx(D,{size:i?16:18}),autoComplete:"email",delay:.85,isMobile:i}),e.jsx(C,{type:"password",label:o("auth.password"),value:g,onChange:n=>w(n.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",disabled:p,icon:e.jsx(H,{size:i?16:18}),autoComplete:"current-password",delay:.95,isMobile:i}),e.jsx(q,{children:(x.length>0||c)&&e.jsx(r.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},style:{padding:i?"10px 12px":"12px 14px",borderRadius:i?"10px":"12px",background:c?`${t.error}12`:`${t.warning}12`,border:`1px solid ${c?t.error:t.warning}30`},children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(V,{size:i?14:16,style:{color:c?t.error:t.warning,flexShrink:0,marginTop:"1px"}}),e.jsxs("div",{children:[c&&e.jsx("p",{style:{fontSize:i?"11px":"12px",color:t.error},children:c}),x.map((n,b)=>e.jsx("p",{style:{fontSize:i?"11px":"12px",color:t.warning},children:n},b))]})]})})}),u>0&&u<5&&e.jsxs("p",{style:{fontSize:"10px",color:t.textMuted,textAlign:"center",margin:0},children:["Tentativi: ",u,"/5"]}),e.jsx(r.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.4,delay:1.05},children:e.jsx(r.button,{type:"submit",disabled:p||u>=5,whileHover:{scale:1.015},whileTap:{scale:.985},animate:k&&!p?{boxShadow:[`0 4px 15px ${t.accent}25`,`0 4px 25px ${t.accent}40`,`0 4px 15px ${t.accent}25`]}:{},transition:k?{duration:2,repeat:1/0}:{},style:{width:"100%",height:a?"44px":i?"46px":"52px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:a?"14px":i?"15px":"16px",fontWeight:600,color:"#0a0a09",background:`linear-gradient(135deg, ${t.accentLight}, ${t.accent})`,border:"none",borderRadius:i?"12px":"14px",cursor:p||u>=5?"not-allowed":"pointer",opacity:p||u>=5?.6:1,boxShadow:`0 4px 15px ${t.accent}25`},children:p?e.jsxs(e.Fragment,{children:[e.jsx(r.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},style:{width:"18px",height:"18px",border:"2px solid rgba(0,0,0,0.2)",borderTopColor:"#0a0a09",borderRadius:"50%"}}),e.jsx("span",{children:"Accesso..."})]}):o("auth.login")})})]})}),e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:1.1},className:"text-center",style:{marginTop:a?"10px":i?"12px":"14px"},children:e.jsx(j,{to:"/forgot-password",style:{fontSize:a?"11px":i?"12px":"13px",color:t.textMuted,textDecoration:"none"},children:"Password dimenticata?"})}),e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:1.15},className:"text-center",style:{marginTop:a?"10px":i?"12px":"14px"},children:e.jsxs(j,{to:"/register",className:"inline-flex items-center gap-1.5",style:{fontSize:a?"12px":i?"13px":"14px",color:t.accentLight},children:[e.jsx(G,{size:i?14:16}),e.jsxs("span",{children:["Non hai un account? ",e.jsx("strong",{children:"Registrati"})]})]})}),e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:1.25},style:{marginTop:a?"12px":i?"14px":"18px",paddingTop:a?"10px":i?"12px":"16px",borderTop:`1px solid ${t.border}`},children:[e.jsx("p",{style:{fontSize:a?"9px":i?"10px":"11px",color:t.textMuted,textAlign:"center",marginBottom:a?"6px":"8px"},children:"ðŸ”’ Connessione sicura SSL/TLS"}),e.jsxs("div",{className:"flex justify-center items-center",style:{gap:i?"8px":"12px"},children:[e.jsx(j,{to:"/privacy",style:{fontSize:a?"9px":i?"10px":"11px",color:t.textMuted},children:"Privacy"}),e.jsx("span",{style:{color:t.textMuted,fontSize:"8px"},children:"â€¢"}),e.jsx(j,{to:"/terms",style:{fontSize:a?"9px":i?"10px":"11px",color:t.textMuted},children:"Termini"})]})]})]})}),e.jsx(r.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5},style:{position:"fixed",bottom:"8px",right:"8px",fontSize:"9px",color:"rgba(255, 255, 255, 0.2)",fontFamily:"monospace",zIndex:10},children:O})]})};export{Z as Login};
