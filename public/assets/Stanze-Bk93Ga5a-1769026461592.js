import{w as Re,x as $e,r as d,j as e,K as F,m as Le,F as G,Y as ee,y as j,a4 as Oe,a5 as w,a6 as te,Z as ne,H as o,a7 as Y,G as N}from"./index-B7WG_kHJ-1769026461592.js";import{u as Ae,b as Ne,L as _e}from"./Layout-BnB1agDJ-1769026461592.js";import{B as p}from"./Button-BLF6EOYE-1769026461592.js";import{M as b}from"./Modal-BJmk3CCX-1769026461592.js";import{I as V}from"./Input-Bz5_UG-L-1769026461592.js";import{D as q,g as _,R as ie}from"./roomIcons-Bek5fnlQ-1769026461592.js";import{m as l}from"./motion-DSM7Rpg2-1769026461592.js";import"./index-yirOBEcN-1769026461592.js";import"./useTranslation-CnXjuBvM-1769026461592.js";import"./responsive-BJrBEfWo-1769026461592.js";import"./omniapiApi-DDnppdd_-1769026461592.js";const re=z=>{const c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z);return c?`${parseInt(c[1],16)}, ${parseInt(c[2],16)}, ${parseInt(c[3],16)}`:"106, 212, 160"},ae={hidden:{opacity:0,y:30,scale:.95},show:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:"easeOut"}}},He={hidden:{},show:{transition:{staggerChildren:.1}}},Ke=()=>{const{impiantoCorrente:z}=Re(),{colors:c,modeColors:H}=$e(),{stanze:T,loading:se}=Ae(),{dispositivi:oe,loading:le}=Ne(),t=d.useMemo(()=>({...H,accent:c.accent,accentLight:c.accentLight,border:`rgba(${re(c.accent)}, 0.15)`,borderHover:`rgba(${re(c.accent)}, 0.35)`}),[c,H]),[K,Q]=d.useState(!1),[de,v]=d.useState(!1),[ce,f]=d.useState(!1),[xe,C]=d.useState(!1),[pe,m]=d.useState(!1),[ue,k]=d.useState(!1),[ge,M]=d.useState(!1),[he,I]=d.useState(!1),[s,R]=d.useState(null),[i,$]=d.useState(null),[W,L]=d.useState(!1),[u,E]=d.useState({nome:"",icona:q}),[O,B]=d.useState(""),[x,P]=d.useState({nome:"",icona:""}),S=(z==null?void 0:z.id)||0,me=se||le,ye=async()=>{var a,h;if(!u.nome){o.error("Inserisci il nome della stanza");return}const n=u.nome.trim().toLowerCase();if(T.some(y=>y.nome.toLowerCase()===n)){o.error("Esiste già una stanza con questo nome");return}try{Q(!0),await Y.createStanza(S,u),o.success("Stanza creata!"),v(!1),E({nome:"",icona:q})}catch(y){o.error(((h=(a=y.response)==null?void 0:a.data)==null?void 0:h.error)||"Errore durante la creazione")}finally{Q(!1)}},fe=async()=>{var n,r;if(s)try{await Y.deleteStanza(s.id),o.success("Stanza eliminata!"),f(!1),R(null)}catch(a){o.error(((r=(n=a.response)==null?void 0:n.data)==null?void 0:r.error)||"Errore durante l'eliminazione")}},be=async()=>{var a,h;if(!s||!x.nome.trim()){o.error("Inserisci un nome valido");return}const n=x.nome.trim().toLowerCase();if(T.some(y=>y.id!==s.id&&y.nome.toLowerCase()===n)){o.error("Esiste già una stanza con questo nome");return}try{await Y.updateStanza(s.id,{nome:x.nome.trim(),icona:x.icona}),o.success("Stanza rinominata!"),I(!1),f(!1),R(null)}catch(y){o.error(((h=(a=y.response)==null?void 0:a.data)==null?void 0:h.error)||"Errore durante la rinomina")}},je=()=>{P({nome:(s==null?void 0:s.nome)||"",icona:(s==null?void 0:s.icona)||q}),f(!1),I(!0)},U=async n=>{var r,a;if(i)try{await N.assignToStanza(i.id,n),o.success("Dispositivo spostato!"),k(!1),m(!1),$(null)}catch(h){o.error(((a=(r=h.response)==null?void 0:r.data)==null?void 0:a.error)||"Errore durante lo spostamento")}},ze=async n=>{var r,a;if(s)try{await N.assignToStanza(n.id,s.id),o.success(`${n.nome} aggiunto!`)}catch(h){o.error(((a=(r=h.response)==null?void 0:r.data)==null?void 0:a.error)||"Errore durante l'assegnazione")}},ve=async()=>{var n,r;if(!i||!O.trim()){o.error("Inserisci un nome valido");return}try{await N.renameDispositivo(i.id,O.trim()),o.success("Dispositivo rinominato!"),M(!1),m(!1),B(""),$(null)}catch(a){o.error(((r=(n=a.response)==null?void 0:n.data)==null?void 0:r.error)||"Errore durante la rinomina")}},Se=async()=>{var n,r;if(i&&confirm(`Eliminare "${i.nome}"?`))try{await N.deleteDispositivo(i.id),o.success("Dispositivo eliminato!"),m(!1),$(null)}catch(a){o.error(((r=(n=a.response)==null?void 0:n.data)==null?void 0:r.error)||"Errore durante l'eliminazione")}},we=n=>{R(n),L(!1),f(!0)},Ce=()=>{R(null),L(!0),C(!0)},ke=()=>{f(!1),C(!0)},Z=n=>{$(n),m(!0)},Me=()=>{m(!1),k(!0)},Ie=()=>{B((i==null?void 0:i.nome)||""),m(!1),M(!0)},A=T.filter(n=>n!=null),D=oe.filter(n=>n!=null),J=n=>D.filter(r=>r.stanza_id===n),g=D.filter(n=>!n.stanza_id),X=()=>W?g:s?J(s.id):[];return e.jsxs(_e,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:700,color:t.textPrimary,margin:0},children:"Stanze"}),e.jsxs("p",{style:{fontSize:"13px",color:t.textMuted,margin:"4px 0 0 0"},children:[A.length," stanze, ",D.length," dispositivi"]})]}),e.jsx(l.button,{onClick:()=>v(!0),disabled:!S,style:{width:"44px",height:"44px",padding:0,borderRadius:"16px",background:`linear-gradient(135deg, ${c.accent}, ${c.accentDark})`,border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:S?"pointer":"not-allowed",opacity:S?1:.5,boxShadow:`0 4px 20px ${c.accent}50`},whileHover:{scale:1.05,boxShadow:`0 6px 24px ${c.accent}60`},whileTap:{scale:.95},children:e.jsx(F,{size:20,style:{color:H.bg,display:"block"}})})]}),me?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"48px 0"},children:e.jsx(Le,{size:32,className:"animate-spin",style:{color:t.accent}})}):S?e.jsxs(l.div,{initial:"hidden",animate:"show",variants:He,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[g.length>0&&e.jsxs(l.div,{variants:ae,whileTap:{scale:.98},style:{background:t.bgCardLit,border:`1px solid ${t.border}`,borderRadius:"20px",boxShadow:t.cardShadowLit,padding:"10px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:"25%",right:"25%",height:"1px",background:`linear-gradient(90deg, transparent, ${t.accentLight}4D, transparent)`}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(G,{size:18,style:{color:t.warning}}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:t.textPrimary,margin:0},children:"Non assegnati"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",color:t.textMuted},children:g.length}),e.jsx(l.button,{onClick:Ce,style:{padding:"8px",background:`${t.accent}15`,border:`1px solid ${t.border}`,borderRadius:"10px",cursor:"pointer"},whileHover:{background:`${t.accent}25`,borderColor:t.accent},children:e.jsx(ee,{size:18,style:{color:t.accent}})})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[g.slice(0,6).map(n=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:n.power_state?`1px solid ${t.success}`:"1px solid transparent"},children:[e.jsx(j,{size:12,style:{color:n.power_state?t.success:t.textMuted}}),e.jsx("span",{style:{fontSize:"11px",color:t.textPrimary,maxWidth:"80px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.nome})]},n.id)),g.length>6&&e.jsxs("span",{style:{fontSize:"11px",color:t.textMuted,alignSelf:"center"},children:["+",g.length-6," altri"]})]})]}),A.length===0?e.jsxs("div",{style:{background:t.bgCardLit,border:`1px solid ${t.border}`,borderRadius:"24px",boxShadow:t.cardShadowLit,padding:"32px",textAlign:"center"},children:[e.jsx(Oe,{size:32,style:{color:t.textMuted,marginBottom:"8px"}}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:t.textPrimary,marginBottom:"4px"},children:"Nessuna stanza"}),e.jsx("p",{style:{fontSize:"12px",color:t.textMuted,marginBottom:"12px"},children:"Crea la tua prima stanza"}),e.jsxs(p,{variant:"primary",onClick:()=>v(!0),children:[e.jsx(F,{size:14,style:{marginRight:"4px"}}),"Nuova Stanza"]})]}):A.map(n=>{const r=J(n.id);return e.jsxs(l.div,{variants:ae,whileTap:{scale:.98},style:{background:t.bgCardLit,border:`1px solid ${t.border}`,borderRadius:"20px",boxShadow:t.cardShadowLit,padding:"10px",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:"25%",right:"25%",height:"1px",background:`linear-gradient(90deg, transparent, ${t.accentLight}4D, transparent)`}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(()=>{const a=_(n.icona);return e.jsx(a,{size:18,style:{color:t.accent}})})(),e.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:t.textPrimary,margin:0},children:n.nome})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"12px",color:t.textMuted},children:r.length}),e.jsx(l.button,{onClick:()=>we(n),style:{padding:"8px",background:`${t.accent}15`,border:`1px solid ${t.border}`,borderRadius:"10px",cursor:"pointer"},whileHover:{background:`${t.accent}25`,borderColor:t.accent},children:e.jsx(ee,{size:18,style:{color:t.accent}})})]})]}),r.length>0?e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[r.slice(0,6).map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",border:a.power_state?`1px solid ${t.success}`:"1px solid transparent"},children:[e.jsx(j,{size:12,style:{color:a.power_state?t.success:t.textMuted}}),e.jsx("span",{style:{fontSize:"11px",color:t.textPrimary,maxWidth:"80px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.nome})]},a.id)),r.length>6&&e.jsxs("span",{style:{fontSize:"11px",color:t.textMuted,alignSelf:"center"},children:["+",r.length-6," altri"]})]}):e.jsx("p",{style:{fontSize:"12px",color:t.textMuted,fontStyle:"italic",margin:0},children:"Nessun dispositivo"})]},n.id)})]}):e.jsx("div",{style:{background:t.bgCardLit,border:`1px solid ${t.border}`,borderRadius:"24px",boxShadow:t.cardShadowLit,padding:"32px",textAlign:"center"},children:e.jsx("p",{style:{color:t.textMuted,fontSize:"14px",margin:0},children:"Seleziona un impianto per vedere le stanze"})})]}),e.jsx(b,{isOpen:de,onClose:()=>v(!1),title:"Nuova Stanza",size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx(V,{label:"Nome Stanza",value:u.nome,onChange:n=>E({...u,nome:n.target.value}),placeholder:"es. Soggiorno"}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.1em",color:t.textMuted,marginBottom:"8px"},children:"Icona"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",maxHeight:"180px",overflowY:"auto",padding:"4px"},children:ie.map(n=>{const r=_(n.id);return e.jsxs(l.button,{onClick:()=>E({nome:u.nome||n.label,icona:n.id}),style:{padding:"12px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",borderRadius:"12px",border:u.icona===n.id?`2px solid ${t.accent}`:`2px solid ${t.border}`,background:u.icona===n.id?`${t.accent}20`:"transparent",cursor:"pointer"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(r,{size:22,style:{color:u.icona===n.id?t.accent:t.textMuted}}),e.jsx("span",{style:{fontSize:"10px",color:u.icona===n.id?t.accent:t.textMuted},children:n.label})]},n.id)})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[e.jsx(p,{variant:"ghost",onClick:()=>v(!1),fullWidth:!0,children:"Annulla"}),e.jsx(p,{variant:"primary",onClick:ye,fullWidth:!0,disabled:K,children:K?"Creazione...":"Crea"})]})]})}),e.jsx(b,{isOpen:ce,onClose:()=>f(!1),title:(s==null?void 0:s.nome)||"Stanza",size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs(l.button,{onClick:ke,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(j,{size:18,style:{color:t.accent}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary},children:"Gestisci dispositivi"})]}),e.jsx(w,{size:16,style:{color:t.textMuted}})]}),e.jsxs(l.button,{onClick:je,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(te,{size:18,style:{color:t.warning}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary},children:"Rinomina stanza"})]}),e.jsx(w,{size:16,style:{color:t.textMuted}})]}),e.jsx(l.button,{onClick:fe,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:`${t.error}20`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(ne,{size:18,style:{color:t.error}}),e.jsx("span",{style:{fontSize:"14px",color:t.error},children:"Elimina stanza"})]})}),e.jsx(p,{variant:"ghost",onClick:()=>f(!1),fullWidth:!0,style:{marginTop:"8px"},children:"Chiudi"})]})}),e.jsx(b,{isOpen:xe,onClose:()=>{C(!1),L(!1)},title:W?"Non assegnati":(s==null?void 0:s.nome)||"",size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[W?e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:"12px",color:t.textMuted,marginBottom:"8px"},children:"Clicca su un dispositivo per assegnarlo a una stanza"}),g.length===0?e.jsx("p",{style:{textAlign:"center",fontSize:"14px",color:t.textMuted,padding:"24px 0"},children:"Nessun dispositivo"}):e.jsx("div",{style:{maxHeight:"256px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:g.map(n=>e.jsxs(l.button,{onClick:()=>Z(n),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(j,{size:16,style:{color:n.power_state?t.success:t.textMuted}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary},children:n.nome})]}),e.jsx(w,{size:14,style:{color:t.textMuted}})]},n.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{fontSize:"12px",color:t.textMuted,marginBottom:"8px"},children:"Clicca su un dispositivo per gestirlo"}),e.jsxs("div",{style:{maxHeight:"320px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:[X().length===0?e.jsx("p",{style:{textAlign:"center",fontSize:"13px",color:t.textMuted,padding:"16px 0"},children:"Nessun dispositivo in questa stanza"}):X().map(n=>e.jsxs(l.button,{onClick:()=>Z(n),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(j,{size:16,style:{color:n.power_state?t.success:t.textMuted}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary},children:n.nome})]}),e.jsx(w,{size:14,style:{color:t.textMuted}})]},n.id)),g.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"12px",marginBottom:"4px"},children:[e.jsx(G,{size:14,style:{color:t.warning}}),e.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:t.textMuted},children:"Non assegnati"}),e.jsx("div",{style:{flex:1,height:"1px",background:t.border}})]}),g.map(n=>e.jsxs(l.button,{onClick:()=>ze(n),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"12px",background:"rgba(255,255,255,0.03)",border:`1px dashed ${t.border}`,cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.08)",borderColor:t.accent},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(j,{size:16,style:{color:t.textMuted}}),e.jsx("span",{style:{fontSize:"14px",color:t.textMuted},children:n.nome})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"6px",background:`${t.accent}20`},children:e.jsx(F,{size:14,style:{color:t.accent}})})]},n.id))]})]})]}),e.jsx(p,{variant:"ghost",onClick:()=>{C(!1),L(!1)},fullWidth:!0,style:{marginTop:"12px"},children:"Chiudi"})]})}),e.jsx(b,{isOpen:pe,onClose:()=>m(!1),title:(i==null?void 0:i.nome)||"",size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(l.button,{onClick:Me,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(w,{size:18,style:{color:t.accent}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary},children:"Sposta in altra stanza"})]})}),e.jsx(l.button,{onClick:Ie,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:"rgba(255,255,255,0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(te,{size:18,style:{color:t.warning}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary},children:"Rinomina dispositivo"})]})}),e.jsx(l.button,{onClick:Se,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",borderRadius:"12px",background:"rgba(255,255,255,0.05)",border:"none",cursor:"pointer"},whileHover:{background:`${t.error}20`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(ne,{size:18,style:{color:t.error}}),e.jsx("span",{style:{fontSize:"14px",color:t.error},children:"Elimina dispositivo"})]})}),e.jsx(p,{variant:"ghost",onClick:()=>m(!1),fullWidth:!0,style:{marginTop:"8px"},children:"Annulla"})]})}),e.jsx(b,{isOpen:ue,onClose:()=>k(!1),title:`Sposta "${(i==null?void 0:i.nome)||""}"`,size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("p",{style:{fontSize:"12px",color:t.textMuted,marginBottom:"8px"},children:"Seleziona la stanza di destinazione"}),e.jsxs(l.button,{onClick:()=>U(null),disabled:!(i!=null&&i.stanza_id),style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",background:i!=null&&i.stanza_id?"rgba(255,255,255,0.05)":`${t.accent}20`,border:i!=null&&i.stanza_id?"none":`1px solid ${t.accent}`,cursor:i!=null&&i.stanza_id?"pointer":"default"},whileHover:i!=null&&i.stanza_id?{background:"rgba(255,255,255,0.1)"}:void 0,children:[e.jsx(G,{size:18,style:{color:t.warning}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary,flex:1,textAlign:"left"},children:"Non assegnato"}),!(i!=null&&i.stanza_id)&&e.jsx("span",{style:{fontSize:"12px",color:t.accent},children:"Attuale"})]}),e.jsx("div",{style:{maxHeight:"192px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px"},children:A.map(n=>{const r=_(n.icona);return e.jsxs(l.button,{onClick:()=>U(n.id),disabled:(i==null?void 0:i.stanza_id)===n.id,style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",background:(i==null?void 0:i.stanza_id)===n.id?`${t.accent}20`:"rgba(255,255,255,0.05)",border:(i==null?void 0:i.stanza_id)===n.id?`1px solid ${t.accent}`:"none",cursor:(i==null?void 0:i.stanza_id)===n.id?"default":"pointer"},whileHover:(i==null?void 0:i.stanza_id)!==n.id?{background:"rgba(255,255,255,0.1)"}:void 0,children:[e.jsx(r,{size:18,style:{color:(i==null?void 0:i.stanza_id)===n.id?t.accent:t.textMuted}}),e.jsx("span",{style:{fontSize:"14px",color:t.textPrimary,flex:1,textAlign:"left"},children:n.nome}),(i==null?void 0:i.stanza_id)===n.id&&e.jsx("span",{style:{fontSize:"12px",color:t.accent},children:"Attuale"})]},n.id)})}),e.jsx(p,{variant:"ghost",onClick:()=>k(!1),fullWidth:!0,style:{marginTop:"12px"},children:"Annulla"})]})}),e.jsx(b,{isOpen:ge,onClose:()=>M(!1),title:"Rinomina dispositivo",size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx(V,{label:"Nuovo nome",value:O,onChange:n=>B(n.target.value),placeholder:"es. Luce Soggiorno",autoFocus:!0}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(p,{variant:"ghost",onClick:()=>M(!1),fullWidth:!0,children:"Annulla"}),e.jsx(p,{variant:"primary",onClick:ve,fullWidth:!0,disabled:!O.trim(),children:"Salva"})]})]})}),e.jsx(b,{isOpen:he,onClose:()=>I(!1),title:"Rinomina stanza",size:"sm",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx(V,{label:"Nome Stanza",value:x.nome,onChange:n=>P({...x,nome:n.target.value}),placeholder:"es. Soggiorno",autoFocus:!0}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.1em",color:t.textMuted,marginBottom:"8px"},children:"Icona"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px"},children:ie.map(n=>{const r=_(n.id);return e.jsxs(l.button,{onClick:()=>P({nome:x.nome||n.label,icona:n.id}),style:{padding:"12px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",borderRadius:"12px",border:x.icona===n.id?`2px solid ${t.accent}`:`2px solid ${t.border}`,background:x.icona===n.id?`${t.accent}20`:"transparent",cursor:"pointer"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(r,{size:22,style:{color:x.icona===n.id?t.accent:t.textMuted}}),e.jsx("span",{style:{fontSize:"10px",color:x.icona===n.id?t.accent:t.textMuted},children:n.label})]},n.id)})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx(p,{variant:"ghost",onClick:()=>I(!1),fullWidth:!0,children:"Annulla"}),e.jsx(p,{variant:"primary",onClick:be,fullWidth:!0,disabled:!x.nome.trim(),children:"Salva"})]})]})})]})};export{Ke as Stanze};
