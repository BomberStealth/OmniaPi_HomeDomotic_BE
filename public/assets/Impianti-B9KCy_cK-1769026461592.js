import{u as d,J as h,a as g,r as u,j as t,K as n,h as y,M as N,N as j,O as f}from"./index-B7WG_kHJ-1769026461592.js";import{L as v}from"./Layout-BnB1agDJ-1769026461592.js";import{C as o}from"./Card-tMATpRxV-1769026461592.js";import{u as k}from"./useTranslation-CnXjuBvM-1769026461592.js";import"./motion-DSM7Rpg2-1769026461592.js";import"./index-yirOBEcN-1769026461592.js";import"./responsive-BJrBEfWo-1769026461592.js";import"./omniapiApi-DDnppdd_-1769026461592.js";const S=()=>{const{t:c}=k(),r=d(),{impianti:s,fetchImpianti:x,setImpiantoCorrente:m}=h(),{user:i}=g(),a=(i==null?void 0:i.ruolo)==="admin"||(i==null?void 0:i.ruolo)==="installatore";u.useEffect(()=>{x()},[]);const p=e=>{m(e),r(`/impianti/${e.id}`)},l=()=>{r("/setup")};return t.jsx(v,{children:t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold dark:text-copy light:text-copy-light",children:c("impianti.title")}),t.jsxs("p",{className:"text-xs sm:text-sm dark:text-copy-lighter light:text-copy-lighter",children:[s.length," impianti"]})]}),a&&t.jsx("button",{onClick:l,className:"p-2 rounded-xl bg-primary hover:bg-primary-dark transition-colors",title:"Nuovo Impianto",children:t.jsx(n,{size:20,className:"text-white"})})]}),s.length>0?t.jsx("div",{className:"flex flex-col gap-2",children:s.filter(e=>e!=null).map(e=>t.jsx(o,{variant:"glass",hover:!0,padding:!1,className:"cursor-pointer",onClick:()=>p(e),children:t.jsxs("div",{className:"flex items-center gap-3 p-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-primary/20 flex-shrink-0",children:t.jsx(y,{size:18,className:"text-primary"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-sm dark:text-copy light:text-copy-light truncate",children:e.nome}),e.indirizzo&&t.jsxs("p",{className:"text-[11px] dark:text-copy-lighter light:text-copy-lighter truncate flex items-center gap-1",children:[t.jsx(N,{size:10,className:"flex-shrink-0"}),e.indirizzo,", ",e.citta]})]}),t.jsx(j,{size:18,className:"dark:text-copy-lighter light:text-copy-lighter flex-shrink-0"})]})},e.id))}):t.jsxs(o,{variant:"glass",className:"text-center py-8",children:[t.jsx(f,{size:40,className:"mx-auto mb-3 dark:text-copy-lighter light:text-copy-lighter"}),t.jsx("h3",{className:"text-base font-semibold dark:text-copy light:text-copy-light mb-1",children:"Nessun impianto"}),t.jsx("p",{className:"text-xs dark:text-copy-lighter light:text-copy-lighter mb-4",children:a?"Aggiungi il tuo primo impianto":"Attendi un invito da un installatore"}),a&&t.jsxs("button",{onClick:l,className:"px-4 py-2 rounded-lg bg-primary hover:bg-primary-dark text-white text-sm font-medium transition-colors",children:[t.jsx(n,{size:16,className:"inline mr-1"}),"Nuovo Impianto"]})]})]})})};export{S as Impianti};
